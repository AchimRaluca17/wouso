{% extends 'site_base.html' %}
{% load artifacts %}
{% load i18n %}

{% block title %} Top {% endblock %}

{% block content %}

<h2>Top</h2>

{% if top.disabled %}
    {% trans 'Top has been disabled.' %}
{% else %}
<table id="clasament">
<tr>
<th>&nbsp;</th>
<th width = "100%" align=left> Player </th>
<th> <a href="/top/toptype/{{ toptype }}/sortcrit/0/page/1/">Points</a> </th>
<th> <a href="/top/toptype/{{ toptype }}/sortcrit/1/page/1/">Progress</a> </th>
<th> <a href="/top/toptype/{{ toptype }}/sortcrit/2/page/1/">Last&nbsp;seen</a> </th>
</tr>

{% for user in allUsers.object_list %}
<tr>
<td> {% artifact user.level %} </td>
<td> <a href="{% url interface.profile.views.user_profile user.id %}">{{ user }}</a>
{% for artf in user.artifacts.all %}
<div class = "artefacts">
{% artifact artf %}
</div>
{% endfor %}
</td>
<td> {{ user.points }} </td>
{% if toptype %}
<td> {{ user.weeklyprogress }} </td>
{% else %}
<td> {{ user.progress }} </td>
{% endif %}
<td nowrap> {% if user.last_seen %}{{ user.last_seen }}{% else %}Never{% endif %} </td>
</tr>
{% endfor %}
</table>

        {% if allUsers.has_previous %}
        <a href="{% url wouso.interface.top.views.gettop sortcrit=sortcrit toptype=toptype page=allUsers.previous_page_number %}"> Previous </a>
        {% endif %}

        {% if allUsers.has_next %}
        <a href="{% url wouso.interface.top.views.gettop sortcrit=sortcrit toptype=toptype page=allUsers.next_page_number %}"> Next </a>
        {% endif %}

{% if page_top_prev %}
<a href="/top/toptype/{{ toptype }}/sortcrit/{{ sortcrit }}/page/{{ page_top_prev }}/"> prev </a>
{% endif %}
{% if page_top_next %}
<a href="/top/toptype/{{ toptype }}/sortcrit/{{ sortcrit }}/page/{{ page_top_next }}/"> next </a>
{% endif %}

{% endif %}
{% endblock %}
